package com.zmen.backend.entity;

import jakarta.persistence.*;
import java.time.LocalDateTime;
import java.util.Set;

@Entity
@Table(name = "vai_tro")
public class VaiTro {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @Column(name = "ten_vai_tro", length = 50, unique = true)
    private String tenVaiTro;
    
    @Column(name = "mo_ta", length = 255)
    private String moTa;
    
    @Column(name = "muc_do_uu_tien")
    private Integer mucDoUuTien = 0;
    
    @Column(name = "trang_thai")
    private Boolean trangThai = true;
    
    @Column(name = "created_at")
    private LocalDateTime createdAt;
    
    @Column(name = "updated_at")
    private LocalDateTime updatedAt;
    
    @ManyToMany(mappedBy = "vaiTros")
    private Set<User> users;
    
    @ManyToMany
    @JoinTable(
        name = "vai_tro_quyen",
        joinColumns = @JoinColumn(name = "vai_tro_id"),
        inverseJoinColumns = @JoinColumn(name = "quyen_id")
    )
    private Set<Quyen> quyens;
    
    @PrePersist
    protected void onCreate() {
        createdAt = LocalDateTime.now();
        updatedAt = LocalDateTime.now();
    }
    
    @PreUpdate
    protected void onUpdate() {
        updatedAt = LocalDateTime.now();
    }
    
    // Constructors
    public VaiTro() {}
    
    public VaiTro(String tenVaiTro, String moTa) {
        this.tenVaiTro = tenVaiTro;
        this.moTa = moTa;
    }
    
    public VaiTro(String tenVaiTro, String moTa, Integer mucDoUuTien) {
        this.tenVaiTro = tenVaiTro;
        this.moTa = moTa;
        this.mucDoUuTien = mucDoUuTien;
    }
    
    // Getters and Setters
    public Long getId() {
        return id;
    }
    
    public void setId(Long id) {
        this.id = id;
    }
    
    public String getTenVaiTro() {
        return tenVaiTro;
    }
    
    public void setTenVaiTro(String tenVaiTro) {
        this.tenVaiTro = tenVaiTro;
    }
    
    public String getMoTa() {
        return moTa;
    }
    
    public void setMoTa(String moTa) {
        this.moTa = moTa;
    }
    
    public Integer getMucDoUuTien() {
        return mucDoUuTien;
    }
    
    public void setMucDoUuTien(Integer mucDoUuTien) {
        this.mucDoUuTien = mucDoUuTien;
    }
    
    public Boolean getTrangThai() {
        return trangThai;
    }
    
    public void setTrangThai(Boolean trangThai) {
        this.trangThai = trangThai;
    }
    
    public LocalDateTime getCreatedAt() {
        return createdAt;
    }
    
    public void setCreatedAt(LocalDateTime createdAt) {
        this.createdAt = createdAt;
    }
    
    public LocalDateTime getUpdatedAt() {
        return updatedAt;
    }
    
    public void setUpdatedAt(LocalDateTime updatedAt) {
        this.updatedAt = updatedAt;
    }
    
    public Set<User> getUsers() {
        return users;
    }
    
    public void setUsers(Set<User> users) {
        this.users = users;
    }
    
    public Set<Quyen> getQuyens() {
        return quyens;
    }
    
    public void setQuyens(Set<Quyen> quyens) {
        this.quyens = quyens;
    }
}

